## Lab 4. Scene, Lights, DI

1. Прискорюючі структури даних

   Оскільки кількість трикутників може бути значною (зазвичай набагато більше за 1 млн), а швидкість найпростішого алгоритму складає O(n*m), де n — кількість трикутників, а m — кількість пікселів зображення, використовують структури даних схожі на дерева, що дозволяють швидко відсікати трикутники, які точно не перетинаються з променем під час трасування.

   Додайте будь-яку структуру, що прискорюватиме пошук перетинів променя з об'єктами на сцені: kd-tree, Octree, BVH-tree. Додайте можливість створити зображення двічі за один запуск програми (з деревом та без нього) і порівняти результат. Ваша програма також має бути спроможна без змін у коді запускатися в звичайному режимі — створювати лише одне зображення.

2. Різні джерела світла

   Створіть три різних типи джерел світла:

   - Точкове — має три параметри: положення в просторі, колір, інтенсивність.
   - Направлене — три параметри: напрямок, колір, інтенсивність
   - Навколишнє — два параметри: колір та інтенсивність.

3. Dependency Injection

   Ваш код має відповідати принципу dependency injection. Це не означає, що ви обов'язково маєте використовувати DI контейнер. В найпростішому випадку ваша програма в точці входу має містити лише composition root. Там ви маєте створити більшість класів, що необхідні для роботи програми, а далі передати керування в клас з найвищого рівня в вашій архітектурі. В якому в свою чергу знаходиться алгоритм роботи вашої програми на найбільш абстрактному рівні.

   Щоб об'єкти високого рівня могли створювати екземпляри класів більш низького рівня використайте фабрики, які також слід створити в composition root.

   Такий підхід має назву Pure DI або Poor Man's DI (обидві назви погані за різних причин).

   Детальніше про DI дивіться у відповідній лекції.

   За додаткові бали ви можете написати власну реалізацію простого DI контейнера.

4. Сцени

   У вашій програмі мають бути задані кілька різних сцен (у вигляді різних класів/об'єктів), які можна вибирати замість об'єкта при трасуванні. 

   Кожна сцена складається з однієї камери, довільної кількості різних джерел світла, довільної кількості примітивів та довільної кількості мешів, що зчитуються з файлів obj. Кожна сцена має свою назву, яку можна вказати при запуску програми для виведення саме цієї сцени.

   Наприклад, якщо запустити вашу програму таким чином:

   ```
   > raytracer.exe --source=cow.obj --output=out.bmp
   ```

   має трасуватися лише вміст файлу з коровою, а якщо вказати сцену:

   ```
   > raytracer.exe --scene=cow-scene --output=out.bmp
   ```

   то має трасуватися певна сцена з вашої програми з іменем "cow-scene".
